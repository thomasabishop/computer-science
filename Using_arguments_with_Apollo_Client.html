<!DOCTYPE html><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="width=device-width, initial-scale=1" name="viewport" /><!--replace-start-0--><!--replace-start-5--><!--replace-start-8--><title>Using arguments with Apollo Client - My Zettelkasten</title><!--replace-end-8--><!--replace-end-5--><!--replace-end-0--><link href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Merriweather|Libre+Franklin|Roboto+Mono&amp;display=swap" rel="stylesheet" /><!--replace-start-1--><!--replace-start-4--><!--replace-start-7--><link href="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" rel="icon" /><meta content="In order to demonstrate arguments we need to expand the original schema." name="description" /><meta content="Using arguments with Apollo Client" property="og:title" /><meta content="My Zettelkasten" property="og:site_name" /><meta content="article" property="og:type" /><meta content="Using_arguments_with_Apollo_Client" property="neuron:zettel-id" /><meta content="Using_arguments_with_Apollo_Client" property="neuron:zettel-slug" /><meta content="graphql" property="neuron:zettel-tag" /><script type="application/ld+json">[]</script><style type="text/css">body{background-color:#eeeeee !important;font-family:"Libre Franklin", serif !important}body .ui.container{font-family:"Libre Franklin", serif !important}body h1, h2, h3, h4, h5, h6, .ui.header, .headerFont{font-family:"Merriweather", sans-serif !important}body code, pre, tt, .monoFont{font-family:"Roboto Mono","SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace !important}body div.z-index p.info{color:#808080}body div.z-index ul{list-style-type:square;padding-left:1.5em}body div.z-index .uplinks{margin-left:0.29999em}body .zettel-content h1#title-h1{background-color:rgba(33,133,208,0.1)}body nav.bottomPane{background-color:rgba(33,133,208,2.0e-2)}body div#footnotes{border-top-color:#2185d0}body p{line-height:150%}body img{max-width:100%}body .deemphasized{font-size:0.94999em}body .deemphasized:hover{opacity:1}body .deemphasized:not(:hover){opacity:0.69999}body .deemphasized:not(:hover) a{color:#808080 !important}body div.container.universe{padding-top:1em}body div.zettel-view ul{padding-left:1.5em;list-style-type:square}body div.zettel-view .pandoc .highlight{background-color:#ffff00}body div.zettel-view .pandoc .ui.disabled.fitted.checkbox{margin-right:0.29999em;vertical-align:middle}body div.zettel-view .zettel-content .metadata{margin-top:1em}body div.zettel-view .zettel-content .metadata div.date{text-align:center;color:#808080}body div.zettel-view .zettel-content h1{padding-top:0.2em;padding-bottom:0.2em;text-align:center}body div.zettel-view .zettel-content h2{border-bottom:solid 1px #4682b4;margin-bottom:0.5em}body div.zettel-view .zettel-content h3{margin:0px 0px 0.4em 0px}body div.zettel-view .zettel-content h4{opacity:0.8}body div.zettel-view .zettel-content div#footnotes{margin-top:4em;border-top-style:groove;border-top-width:2px;font-size:0.9em}body div.zettel-view .zettel-content div#footnotes ol > li > p:only-of-type{display:inline;margin-right:0.5em}body div.zettel-view .zettel-content aside.footnote-inline{width:30%;padding-left:15px;margin-left:15px;float:right;background-color:#d3d3d3}body div.zettel-view .zettel-content .overflows{overflow:auto}body div.zettel-view .zettel-content code{margin:auto auto auto auto;font-size:100%}body div.zettel-view .zettel-content p code, li code, ol code{padding:0.2em 0.2em 0.2em 0.2em;background-color:#f5f2f0}body div.zettel-view .zettel-content pre{overflow:auto}body div.zettel-view .zettel-content dl dt{font-weight:bold}body div.zettel-view .zettel-content blockquote{background-color:#f9f9f9;border-left:solid 10px #cccccc;margin:1.5em 0px 1.5em 0px;padding:0.5em 10px 0.5em 10px}body div.zettel-view .zettel-content.raw{background-color:#dddddd}body .ui.label.zettel-tag{color:#000000}body .ui.label.zettel-tag a{color:#000000}body nav.bottomPane ul.backlinks > li{padding-bottom:0.4em;list-style-type:disc}body nav.bottomPane ul.context-list > li{list-style-type:lower-roman}body .footer-version img{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%)}body .footer-version img:hover{-webkit-filter:grayscale(0%);-moz-filter:grayscale(0%);-ms-filter:grayscale(0%);-o-filter:grayscale(0%);filter:grayscale(0%)}body .footer-version, .footer-version a, .footer-version a:visited{color:#808080}body .footer-version a{font-weight:bold}body .footer-version{margin-top:1em !important;font-size:0.69999em}@media only screen and (max-width: 768px){body div#zettel-container{margin-left:0.4em !important;margin-right:0.4em !important}}body span.zettel-link-container span.zettel-link a{color:#2185d0;font-weight:bold;text-decoration:none}body span.zettel-link-container span.zettel-link a:hover{background-color:rgba(33,133,208,0.1)}body span.zettel-link-container span.extra{color:auto}body span.zettel-link-container.errors{border:solid 1px #ff0000}body span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body [data-tooltip]:after{font-size:0.69999em}body div.tag-tree div.node{font-weight:bold}body div.tag-tree div.node a.inactive{color:#555555}body .tree.flipped{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}body .tree{overflow:auto}body .tree ul.root{padding-top:0px;margin-top:0px}body .tree ul{position:relative;padding:1em 0px 0px 0px;white-space:nowrap;margin:0px auto 0px auto;text-align:center}body .tree ul::after{content:"";display:table;clear:both}body .tree ul:last-child{padding-bottom:0.1em}body .tree li{display:inline-block;vertical-align:top;text-align:center;list-style-type:none;position:relative;padding:1em 0.5em 0em 0.5em}body .tree li::before{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{right:auto;left:50%;border-left:solid 2px #cccccc}body .tree li:only-child{padding-top:0em}body .tree li:only-child::after{display:none}body .tree li:only-child::before{display:none}body .tree li:first-child::before{border-style:none;border-width:0px}body .tree li:first-child::after{border-radius:5px 0px 0px 0px}body .tree li:last-child::after{border-style:none;border-width:0px}body .tree li:last-child::before{border-right:solid 2px #cccccc;border-radius:0px 5px 0px 0px}body .tree ul ul::before{content:"";position:absolute;top:0px;left:50%;border-left:solid 2px #cccccc;width:0px;height:1.19999em}body .tree li div.forest-link{border:solid 2px #cccccc;padding:0.2em 0.29999em 0.2em 0.29999em;text-decoration:none;display:inline-block;border-radius:5px 5px 5px 5px;color:#333333;position:relative;top:2px}body .tree.flipped li div.forest-link{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}</style><script
  async=""
  id="MathJax-script"
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
></script>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css"
  rel="stylesheet"
/><link rel="preconnect" href="https://fonts.googleapis.com" /><link
  rel="preconnect"
  href="https://fonts.gstatic.com"
  crossorigin
/><link
  href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Serif:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
  rel="stylesheet"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
<style>
  body .ui.container,
  body ul {
    font-family: "IBM Plex Sans" !important;
  }
  body h2,
  body div.zettel-view .zettel-content h2 {
    border-bottom: none !important;
  }

  body blockquote {
    border-left-width: 3px !important;
  }
  .headerFont,
  .ui.header,
  body h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: "IBM Plex Sans Condensed" !important;
  }
  body p {
    line-height: 1.4;
  }
  .monoFont,
  body code,
  pre,
  tt {
    font-family: "IBM Plex Mono" !important;
    font-size: 12px !important;
    line-height: 1.4 !important;
  }
</style>
<!--replace-end-7--><!--replace-end-4--><!--replace-end-1--></head><body><div class="ui fluid container universe"><!--replace-start-2--><!--replace-start-3--><!--replace-start-6--><div class="ui text container" id="zettel-container" style="position: relative"><div class="zettel-view"><article class="ui raised attached segment zettel-content"><div class="pandoc"><h1 id="title-h1">Using arguments with Apollo Client</h1><h2 id="what-are-arguments">What are arguments?</h2><ul><li>An argument is a value you provide for a particular field in a query.</li><li>The schema must define the arguments that a field accepts (if any)</li><li>The resolver invokes a field’s provided arguments to determine how to return specific data</li><li>Some example use cases of arguments:<ul><li>retrieve specific objects</li><li>filter through a set of objects</li><li>transform a field’s returned value</li></ul></li></ul><h2 id="updated-schema">Updated schema</h2><p>In order to demonstrate arguments we need to expand the <a href="Apollo_Server.md#example-schema">original schema</a>.</p><p>Remember a Track is a group of modules that teaches about a specific topic. We are going to add:</p><ul><li><code>description</code> and <code>numberOfViews</code> fields to the original <code>Track</code> type</li><li>A new <code>Module</code> type</li><li>A field <code>modules</code> to the <code>Track</code> type that will be an array of type <code>Module</code></li></ul><pre><code class="js language-js">type Query {
  tracksForHome: [Track!]!
}

type Track {
    id: ID!
        authorId: String! // They added this on the sly
    thumbnail: String
    length: Int
    modulesCount: Int
    description: String
    numberOfViews: Int
    modules: [Module!]!
}

type Module {
    id: ID!
        length: Int
}

type Author {
    id: ID!
    name: String!
    photo: String
}</code></pre><h2 id="adding-additional-query">Adding additional query</h2><blockquote><p>Currently we only have one query in the schema (<code>tracksForHome</code>) and this returns an array of all the tracks. To demonstrate arguments we want to return a specific track by its <code>id</code>. We are going to add a query that enables this.</p></blockquote><pre><code class="js language-js">type Query {
    track(id: ID!):  Track
}</code></pre><p>This query will take an <code>id</code> as an argument and the resolver will match the <code>id</code> to a given track and return that <code>Track</code>.</p><p>To define an argument for a field in the schema we add parentheses after the field name. In the parentheses we write the name of the argument and its type. If we have more than one argument we can separate them with commas.</p><h2 id="create-resolver-for-new-query">Create resolver for new query</h2><p>Now we have to create a resolver for our new <code>track</code> query. We will quickly run through the <span class="zettel-link-container cf"><span class="zettel-link" title="Zettel: Apollo Server"><a href="Apollo_Server">server-side process</a></span></span>.</p><h3 id="update-our-restdatasource">Update our <code>RESTDataSource</code></h3><pre><code class="js language-js">class TrackAPI extends RESTDataSource {
  constructor() {...}
  getTracksForHome() {...}
  getAuthor(authorId) {...}

  getTrack(trackId){
    return this.get(`track/${trackId}`);
  }
}
</code></pre><h3 id="add-resolver-to-resolversjs">Add resolver to <code>resolvers.js</code></h3><pre><code class="js language-js">const resolvers = {
  Query: {
    tracksForHome: (_, __, { dataSources }) =&gt; {
      return dataSources.trackApi.getTracksForHome();
    },
    track: (_, { id }, { dataSources }) =&gt; {
      return dataSources.trackAPI.getTrack(id);
    },
  },
  Track: {
    author: ({ authorId }, _, { dataSources }) =&gt; {
      return dataSources.trackApi.getAuthor(authorId);
    },
  },
};</code></pre><h3 id="making-a-query">Making a query</h3><p>With the server changes complete, we can now issue a query with an argument from the client:</p><pre><code class="js language-js">query track(id: &#39;xyz&#39;){
  title
}</code></pre><p>This will return the <code>title</code> field from the track with the specific id. This query complies with the schema since the <code>Track</code> type has the field <code>title</code></p><h3 id="resolver-chains">Resolver chains</h3><p>What about the following query:</p><pre><code class="js language-js">query track(id: &#39;xyz&#39;){
  title
  author {
    name
  }
}</code></pre><p>It’s not obvious how the resolver should respond to the nested query here since author name is not a field on <code>Track</code>, it is a field on <code>Author</code>:</p><pre><code class="js language-js">type Track {
  id: ID!
    authorId: String!
  thumbnail: String
  length: Int
  modulesCount: Int
  description: String
  numberOfViews: Int
  modules: [Module!]!
}

type Author {
  id: ID!
  name: String!
  photo: String
}</code></pre><p>This is where we use a <strong>resolver chain</strong>. Because <code>authorId</code> exists on <code>Track</code> we can use this to get the <code>name</code> part of the query. We already have a resolver for <code>author</code> under the <code>Track</code> resolver:</p><pre><code class="js language-js">Track: {
    author: ({ authorId }, _, { dataSources }) =&gt; {
      return dataSources.trackApi.getAuthor(authorId);
    },
  },</code></pre><p>Notice that <code>authorId</code> is used in the place of the <code>parent</code> parameter. It already exists on the <code>Track</code> type that wraps the resolver. So this can be invoked to fulfill <code>author</code> and thereby access the author name from the graph.</p><p>This process is also required for our extended schema. The <code>Track</code> type now has a <code>modules</code> field that comprises an array of the <code>Module</code> type.</p><p>Here’s a reminder of the <code>Module</code> type:</p><pre><code class="js language-js">type Module {
    id: ID!
        length: Int
}</code></pre><p>The modules for a <code>Track</code> can be sourced from the track <code>id</code>. So we can again add a resolver chain function to the resolvers file:</p><pre><code class="js language-js">const resolvers = {
  Query: {
    tracksForHome: (_, __, { dataSources }) =&gt; {
      return dataSources.trackApi.getTracksForHome();
    },
    track: (_, { id }, { dataSources }) =&gt; {
      return dataSources.trackAPI.getTrack(id);
    },
  },
  Track: {
    author: ({ authorId }, _, { dataSources }) =&gt; {
      return dataSources.trackApi.getAuthor(authorId);
    },
    modules: ({ id }, _, { dataSources }) =&gt; {
      return dataSources.trackAPI.getTrackModules(id);
    },
  },
};</code></pre><p>Once again we are using a property on the parent <code>Track</code> type to use as a parameter in the resolver function.</p><p>This setup would enables like the following to be run:</p><pre><code class="js language-js">query track(id: &#39;xyz&#39;){
  title
  modules
}</code></pre><p>The <code>id</code> parameter would be used by the <code>modules</code> resolver to return the array of the <code>Modules</code> type.</p><h2 id="variables-in-arguments">Variables in arguments</h2><p>Instead of writing the following within our query constants on the client-side:</p><pre><code class="js language-js">query GetTrack {
  track(id: &#39;xyz&#39;){
    title
  }
}</code></pre><p>We can make the code more reusable by using variables instead of the hardcoded <code>id</code> argument:</p><pre><code class="js language-js">query GetTrack($trackId: ID!) {
  track(id: $trackId){
    title
  }
}</code></pre><p>This way we do not need to write a new query constant every time we want to return a specific track.</p><h2 id="send-query-with-arguments-using-apollo-usequery">Send query with arguments using Apollo <code>useQuery</code></h2><p>We can now write a proper query using the <a href="Apollo_Client.md#usequery-hook">useQuery hook</a> from Apollo Client, with variables.</p><p>First define our query constant:</p><pre><code class="js language-js">export const GET_TRACK = gql`
  query GetTrack($trackId: ID!) {
    track(id: $trackId) {
      id
      title
      author {
        name
      }
      description
      modules {
        id
        title
        length
      }
    }
  }
`;</code></pre><p>Then to employ in React:</p><pre><code class="jsx language-jsx">const trackId = &quot;xyz&quot;;

const { loading, error, data } = useQuery(GET_TRACK, {
  variables: {
    id: trackId,
  },
});</code></pre><p>Note that in contrast to the <a href="Apollo_Client.md#query-constants">simple example</a> because we are using variables, we have to pass-in an additional options object with the query constant that specifies our variables.</p></div></article><nav class="ui attached segment deemphasized backlinksPane" id="neuron-backlinks-pane"><h3 class="ui header">Backlinks</h3><ul class="backlinks"><li><span class="zettel-link-container cf"><span class="zettel-link"><a href="Apollo_Server">Apollo Server</a></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc">This time we utilise the <code>args</code> parameter in the resolver since an <code>id</code> will be provided as a client-side <span class="zettel-link-container cf"><span class="zettel-link" title="Zettel: Using arguments with Apollo Client"><a href="Using_arguments_with_Apollo_Client">argument</a></span></span> to return a specific author.</div></li></ul></li></ul></nav><nav class="ui attached segment deemphasized bottomPane" id="neuron-tags-pane"><div><span class="ui basic label zettel-tag" title="Tag">graphql</span></div></nav><nav class="ui bottom attached icon compact inverted menu blue" id="neuron-nav-bar"><!--replace-start-9--><!--replace-end-9--><a class="right item" href="impulse" title="Open Impulse"><i class="wave square icon"></i></a></nav></div></div><!--replace-end-6--><!--replace-end-3--><!--replace-end-2--><div class="ui center aligned container footer-version"><div class="ui tiny image"><a href="https://neuron.zettel.page"><img alt="logo" src="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" title="Generated by Neuron 1.9.35.3" /></a></div></div></div></body></html>