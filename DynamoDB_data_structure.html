<!DOCTYPE html><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="width=device-width, initial-scale=1" name="viewport" /><!--replace-start-0--><!--replace-start-5--><!--replace-start-8--><title>DynamoDB - My Zettelkasten</title><!--replace-end-8--><!--replace-end-5--><!--replace-end-0--><link href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Merriweather|Libre+Franklin|Roboto+Mono&amp;display=swap" rel="stylesheet" /><!--replace-start-1--><!--replace-start-4--><!--replace-start-7--><link href="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" rel="icon" /><meta content="DynamoDB is NoSQL because it does not support z:tag/SQL queries and is non-relational meaning there cannot be JOIN operations via foreign_keys" name="description" /><meta content="DynamoDB" property="og:title" /><meta content="My Zettelkasten" property="og:site_name" /><meta content="article" property="og:type" /><meta content="DynamoDB_data_structure" property="neuron:zettel-id" /><meta content="DynamoDB_data_structure" property="neuron:zettel-slug" /><meta content="AWS" property="neuron:zettel-tag" /><meta content="SQL" property="neuron:zettel-tag" /><meta content="databases" property="neuron:zettel-tag" /><meta content="dynamodb" property="neuron:zettel-tag" /><script type="application/ld+json">[]</script><style type="text/css">body{background-color:#eeeeee !important;font-family:"Libre Franklin", serif !important}body .ui.container{font-family:"Libre Franklin", serif !important}body h1, h2, h3, h4, h5, h6, .ui.header, .headerFont{font-family:"Merriweather", sans-serif !important}body code, pre, tt, .monoFont{font-family:"Roboto Mono","SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace !important}body div.z-index p.info{color:#808080}body div.z-index ul{list-style-type:square;padding-left:1.5em}body div.z-index .uplinks{margin-left:0.29999em}body .zettel-content h1#title-h1{background-color:rgba(33,133,208,0.1)}body nav.bottomPane{background-color:rgba(33,133,208,2.0e-2)}body div#footnotes{border-top-color:#2185d0}body p{line-height:150%}body img{max-width:100%}body .deemphasized{font-size:0.94999em}body .deemphasized:hover{opacity:1}body .deemphasized:not(:hover){opacity:0.69999}body .deemphasized:not(:hover) a{color:#808080 !important}body div.container.universe{padding-top:1em}body div.zettel-view ul{padding-left:1.5em;list-style-type:square}body div.zettel-view .pandoc .highlight{background-color:#ffff00}body div.zettel-view .pandoc .ui.disabled.fitted.checkbox{margin-right:0.29999em;vertical-align:middle}body div.zettel-view .zettel-content .metadata{margin-top:1em}body div.zettel-view .zettel-content .metadata div.date{text-align:center;color:#808080}body div.zettel-view .zettel-content h1{padding-top:0.2em;padding-bottom:0.2em;text-align:center}body div.zettel-view .zettel-content h2{border-bottom:solid 1px #4682b4;margin-bottom:0.5em}body div.zettel-view .zettel-content h3{margin:0px 0px 0.4em 0px}body div.zettel-view .zettel-content h4{opacity:0.8}body div.zettel-view .zettel-content div#footnotes{margin-top:4em;border-top-style:groove;border-top-width:2px;font-size:0.9em}body div.zettel-view .zettel-content div#footnotes ol > li > p:only-of-type{display:inline;margin-right:0.5em}body div.zettel-view .zettel-content aside.footnote-inline{width:30%;padding-left:15px;margin-left:15px;float:right;background-color:#d3d3d3}body div.zettel-view .zettel-content .overflows{overflow:auto}body div.zettel-view .zettel-content code{margin:auto auto auto auto;font-size:100%}body div.zettel-view .zettel-content p code, li code, ol code{padding:0.2em 0.2em 0.2em 0.2em;background-color:#f5f2f0}body div.zettel-view .zettel-content pre{overflow:auto}body div.zettel-view .zettel-content dl dt{font-weight:bold}body div.zettel-view .zettel-content blockquote{background-color:#f9f9f9;border-left:solid 10px #cccccc;margin:1.5em 0px 1.5em 0px;padding:0.5em 10px 0.5em 10px}body div.zettel-view .zettel-content.raw{background-color:#dddddd}body .ui.label.zettel-tag{color:#000000}body .ui.label.zettel-tag a{color:#000000}body nav.bottomPane ul.backlinks > li{padding-bottom:0.4em;list-style-type:disc}body nav.bottomPane ul.context-list > li{list-style-type:lower-roman}body .footer-version img{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%)}body .footer-version img:hover{-webkit-filter:grayscale(0%);-moz-filter:grayscale(0%);-ms-filter:grayscale(0%);-o-filter:grayscale(0%);filter:grayscale(0%)}body .footer-version, .footer-version a, .footer-version a:visited{color:#808080}body .footer-version a{font-weight:bold}body .footer-version{margin-top:1em !important;font-size:0.69999em}@media only screen and (max-width: 768px){body div#zettel-container{margin-left:0.4em !important;margin-right:0.4em !important}}body span.zettel-link-container span.zettel-link a{color:#2185d0;font-weight:bold;text-decoration:none}body span.zettel-link-container span.zettel-link a:hover{background-color:rgba(33,133,208,0.1)}body span.zettel-link-container span.extra{color:auto}body span.zettel-link-container.errors{border:solid 1px #ff0000}body span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body [data-tooltip]:after{font-size:0.69999em}body div.tag-tree div.node{font-weight:bold}body div.tag-tree div.node a.inactive{color:#555555}body .tree.flipped{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}body .tree{overflow:auto}body .tree ul.root{padding-top:0px;margin-top:0px}body .tree ul{position:relative;padding:1em 0px 0px 0px;white-space:nowrap;margin:0px auto 0px auto;text-align:center}body .tree ul::after{content:"";display:table;clear:both}body .tree ul:last-child{padding-bottom:0.1em}body .tree li{display:inline-block;vertical-align:top;text-align:center;list-style-type:none;position:relative;padding:1em 0.5em 0em 0.5em}body .tree li::before{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{right:auto;left:50%;border-left:solid 2px #cccccc}body .tree li:only-child{padding-top:0em}body .tree li:only-child::after{display:none}body .tree li:only-child::before{display:none}body .tree li:first-child::before{border-style:none;border-width:0px}body .tree li:first-child::after{border-radius:5px 0px 0px 0px}body .tree li:last-child::after{border-style:none;border-width:0px}body .tree li:last-child::before{border-right:solid 2px #cccccc;border-radius:0px 5px 0px 0px}body .tree ul ul::before{content:"";position:absolute;top:0px;left:50%;border-left:solid 2px #cccccc;width:0px;height:1.19999em}body .tree li div.forest-link{border:solid 2px #cccccc;padding:0.2em 0.29999em 0.2em 0.29999em;text-decoration:none;display:inline-block;border-radius:5px 5px 5px 5px;color:#333333;position:relative;top:2px}body .tree.flipped li div.forest-link{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}</style><script
  async=""
  id="MathJax-script"
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
></script>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css"
  rel="stylesheet"
/><link rel="preconnect" href="https://fonts.googleapis.com" /><link
  rel="preconnect"
  href="https://fonts.gstatic.com"
  crossorigin
/><link
  href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Serif:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
  rel="stylesheet"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
<style>
  body .ui.container,
  body ul {
    font-family: "IBM Plex Sans" !important;
  }
  body blockquote {
    border-left-width: 3px !important;
    font-style: italic;
  }
  .headerFont,
  .ui.header,
  body h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: "IBM Plex Sans Condensed" !important;
  }
  body p {
    line-height: 1.4;
  }
  .monoFont,
  body code,
  pre,
  tt {
    font-family: "IBM Plex Mono" !important;
    font-size: 12px !important;
    line-height: 1.4 !important;
  }
</style>
<!--replace-end-7--><!--replace-end-4--><!--replace-end-1--></head><body><div class="ui fluid container universe"><!--replace-start-2--><!--replace-start-3--><!--replace-start-6--><div class="ui text container" id="zettel-container" style="position: relative"><div class="zettel-view"><article class="ui raised attached segment zettel-content"><div class="pandoc"><h1 id="title-h1">DynamoDB</h1><h2 id="data-structure">Data structure</h2><h3 id="non-relational-tables">Non-relational tables</h3><p>DynamoDB is “NoSQL” because it does not support <span><code class="inline-tag">#SQL</code></span> queries and is non-relational meaning there cannot be JOIN operations via <span class="zettel-link-container cf"><span class="zettel-link" title="Zettel: Creating views with foreign keys"><a href="Foreign_keys_in_SQL">foreign_keys</a></span></span></p><p><img src="/static/dynamodb.png" /></p><h3 id="primary-key">Primary key</h3><p>Although the data is stored as a table, one of the attributes is a primary key and the rest of the attributes are effectively the “value” associated with it.</p><p>Because DynamoDB is schemaless, other than the primary key, neither the attributes or their data types need to be defined beforehand and each item can have its own distinct attributes.</p><p>Each item in the table is uniquely identifiable by its primary key.</p><p>There are two types of primary key available:</p><ul><li><p>partition key: a simple primary key composed of one attribute only. Because the primary key is hash-mapped items can be retrieved very rapidly using the primary key. This would be the <code>personId</code> alone.</p></li><li><p>composite key: this comprises a partition key and a <em>sort key</em> both of which are attributes. In a table that has a partition key and a sort key, it’s possible for multiple items to have the same partition key value. However, those items must have different sort key values. You could then query by either key or both. For instance using the <code>PersonId</code> along with <code>LastName</code></p></li></ul><h3 id="secondary-index">Secondary index</h3><p>As well as the index provided by the primary key, you can set one or more <strong>secondary indices</strong>. A secondary index lets you query the data in the table using an alternate key.</p><p>A <strong>global secondary index</strong> is useful for querying data that needs to be accessed using non-primary key attributes. For example, if you have a Users table with <code>UserID</code> as the primary key but often need to fetch users by their <code>Email</code>, a GSI on <code>Email</code> would be appropriate.</p><p>There are also <strong>local secondary indices</strong> but I don’t understand the difference.</p><h2 id="real-example">Real example</h2><p>Below is a specification of the DynamoDB table I am using for my time-entries project:</p><pre><code class="json language-json">{
  &quot;TableName&quot;: &quot;TimeEntries&quot;,
  &quot;KeyAttributes&quot;: {
    &quot;PartitionKey&quot;: {
      &quot;AttributeName&quot;: &quot;activity_start_end&quot;,
      &quot;AttributeType&quot;: &quot;S&quot;
    }
  },
  &quot;NonKeyAttributes&quot;: [
    {
      &quot;AttributeName&quot;: &quot;activity_type&quot;,
      &quot;AttributeType&quot;: &quot;S&quot;
    },
    {
      &quot;AttributeName&quot;: &quot;start&quot;,
      &quot;AttributeType&quot;: &quot;S&quot;
    },
    {
      &quot;AttributeName&quot;: &quot;end&quot;,
      &quot;AttributeType&quot;: &quot;S&quot;
    },
    {
      &quot;AttributeName&quot;: &quot;duration&quot;,
      &quot;AttributeType&quot;: &quot;N&quot;
    },
    {
      &quot;AttributeName&quot;: &quot;description&quot;,
      &quot;AttributeType&quot;: &quot;S&quot;
    },
    {
      &quot;AttributeName&quot;: &quot;year&quot;,
      &quot;AttributeType&quot;: &quot;S&quot;
    }
  ],
  &quot;GlobalSecondaryIndexes&quot;: [
    {
      &quot;IndexName&quot;: &quot;YearIndex&quot;,
      &quot;KeyAttributes&quot;: {
        &quot;PartitionKey&quot;: {
          &quot;AttributeName&quot;: &quot;year&quot;,
          &quot;AttributeType&quot;: &quot;S&quot;
        },
        &quot;SortKey&quot;: {
          &quot;AttributeName&quot;: &quot;start&quot;,
          &quot;AttributeType&quot;: &quot;S&quot;
        }
      },
      &quot;Projection&quot;: {
        &quot;ProjectionType&quot;: &quot;ALL&quot;
      }
    }
  ]
}</code></pre><p>This defines the attribute <code>activity_start_end</code> as the primary key. This string (<code>S</code>) value is a concatenation of three attributes, which is a way of ensuring each entry for the attribute will be unique.</p><p>The <code>NonKeyAttributes</code> are all the other attributes in addition to the primary key. As mentioned these do not actually need to be defined when setting up the table but they are listed here for clarity.</p><p>I have also defined a GSI. This is derived from the <code>Year</code> attribute. This will group all the items by their <code>Year</code>, allowing me to query directly by year but also helping to chunk the entries which will make look-ups quicker and less expensive.</p><h2 id="related-notes">Related notes</h2></div></article><nav class="ui attached segment deemphasized bottomPane" id="neuron-tags-pane"><div><span class="ui basic label zettel-tag" title="Tag">AWS</span><span class="ui basic label zettel-tag" title="Tag">SQL</span><span class="ui basic label zettel-tag" title="Tag">databases</span><span class="ui basic label zettel-tag" title="Tag">dynamodb</span></div></nav><nav class="ui bottom attached icon compact inverted menu blue" id="neuron-nav-bar"><!--replace-start-9--><!--replace-end-9--><a class="right item" href="impulse" title="Open Impulse"><i class="wave square icon"></i></a></nav></div></div><!--replace-end-6--><!--replace-end-3--><!--replace-end-2--><div class="ui center aligned container footer-version"><div class="ui tiny image"><a href="https://neuron.zettel.page"><img alt="logo" src="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" title="Generated by Neuron 1.9.35.3" /></a></div></div></div></body></html>