<!DOCTYPE html><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="width=device-width, initial-scale=1" name="viewport" /><!--replace-start-0--><!--replace-start-5--><!--replace-start-8--><title>Boot process - My Zettelkasten</title><!--replace-end-8--><!--replace-end-5--><!--replace-end-0--><link href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Merriweather|Libre+Franklin|Roboto+Mono&amp;display=swap" rel="stylesheet" /><!--replace-start-1--><!--replace-start-4--><!--replace-start-7--><link href="static/favicon.ico" rel="icon" /><meta content="The primary or boot partition of a harddisk contains a bootloader. It is the job of the bootloader to locate the kernel on the harddrive and inject it into memory so that they operating system can start. This is the boot process." name="description" /><meta content="Boot process" property="og:title" /><meta content="My Zettelkasten" property="og:site_name" /><meta content="article" property="og:type" /><meta content="Boot_process" property="neuron:zettel-id" /><meta content="Boot_process" property="neuron:zettel-slug" /><meta content="disks" property="neuron:zettel-tag" /><meta content="operating-systems" property="neuron:zettel-tag" /><script type="application/ld+json">[]</script><style type="text/css">body{background-color:#eeeeee !important;font-family:"Libre Franklin", serif !important}body .ui.container{font-family:"Libre Franklin", serif !important}body h1, h2, h3, h4, h5, h6, .ui.header, .headerFont{font-family:"Merriweather", sans-serif !important}body code, pre, tt, .monoFont{font-family:"Roboto Mono","SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace !important}body div.z-index p.info{color:#808080}body div.z-index ul{list-style-type:square;padding-left:1.5em}body div.z-index .uplinks{margin-left:0.29999em}body .zettel-content h1#title-h1{background-color:rgba(33,133,208,0.1)}body nav.bottomPane{background-color:rgba(33,133,208,2.0e-2)}body div#footnotes{border-top-color:#2185d0}body p{line-height:150%}body img{max-width:100%}body .deemphasized{font-size:0.94999em}body .deemphasized:hover{opacity:1}body .deemphasized:not(:hover){opacity:0.69999}body .deemphasized:not(:hover) a{color:#808080 !important}body div.container.universe{padding-top:1em}body div.zettel-view ul{padding-left:1.5em;list-style-type:square}body div.zettel-view .pandoc .highlight{background-color:#ffff00}body div.zettel-view .pandoc .ui.disabled.fitted.checkbox{margin-right:0.29999em;vertical-align:middle}body div.zettel-view .zettel-content .metadata{margin-top:1em}body div.zettel-view .zettel-content .metadata div.date{text-align:center;color:#808080}body div.zettel-view .zettel-content h1{padding-top:0.2em;padding-bottom:0.2em;text-align:center}body div.zettel-view .zettel-content h2{border-bottom:solid 1px #4682b4;margin-bottom:0.5em}body div.zettel-view .zettel-content h3{margin:0px 0px 0.4em 0px}body div.zettel-view .zettel-content h4{opacity:0.8}body div.zettel-view .zettel-content div#footnotes{margin-top:4em;border-top-style:groove;border-top-width:2px;font-size:0.9em}body div.zettel-view .zettel-content div#footnotes ol > li > p:only-of-type{display:inline;margin-right:0.5em}body div.zettel-view .zettel-content aside.footnote-inline{width:30%;padding-left:15px;margin-left:15px;float:right;background-color:#d3d3d3}body div.zettel-view .zettel-content .overflows{overflow:auto}body div.zettel-view .zettel-content code{margin:auto auto auto auto;font-size:100%}body div.zettel-view .zettel-content p code, li code, ol code{padding:0.2em 0.2em 0.2em 0.2em;background-color:#f5f2f0}body div.zettel-view .zettel-content pre{overflow:auto}body div.zettel-view .zettel-content dl dt{font-weight:bold}body div.zettel-view .zettel-content blockquote{background-color:#f9f9f9;border-left:solid 10px #cccccc;margin:1.5em 0px 1.5em 0px;padding:0.5em 10px 0.5em 10px}body div.zettel-view .zettel-content.raw{background-color:#dddddd}body .ui.label.zettel-tag{color:#000000}body .ui.label.zettel-tag a{color:#000000}body nav.bottomPane ul.backlinks > li{padding-bottom:0.4em;list-style-type:disc}body nav.bottomPane ul.context-list > li{list-style-type:lower-roman}body .footer-version img{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%)}body .footer-version img:hover{-webkit-filter:grayscale(0%);-moz-filter:grayscale(0%);-ms-filter:grayscale(0%);-o-filter:grayscale(0%);filter:grayscale(0%)}body .footer-version, .footer-version a, .footer-version a:visited{color:#808080}body .footer-version a{font-weight:bold}body .footer-version{margin-top:1em !important;font-size:0.69999em}@media only screen and (max-width: 768px){body div#zettel-container{margin-left:0.4em !important;margin-right:0.4em !important}}body span.zettel-link-container span.zettel-link a{color:#2185d0;font-weight:bold;text-decoration:none}body span.zettel-link-container span.zettel-link a:hover{background-color:rgba(33,133,208,0.1)}body span.zettel-link-container span.extra{color:auto}body span.zettel-link-container.errors{border:solid 1px #ff0000}body span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body [data-tooltip]:after{font-size:0.69999em}body div.tag-tree div.node{font-weight:bold}body div.tag-tree div.node a.inactive{color:#555555}body .tree.flipped{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}body .tree{overflow:auto}body .tree ul.root{padding-top:0px;margin-top:0px}body .tree ul{position:relative;padding:1em 0px 0px 0px;white-space:nowrap;margin:0px auto 0px auto;text-align:center}body .tree ul::after{content:"";display:table;clear:both}body .tree ul:last-child{padding-bottom:0.1em}body .tree li{display:inline-block;vertical-align:top;text-align:center;list-style-type:none;position:relative;padding:1em 0.5em 0em 0.5em}body .tree li::before{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{right:auto;left:50%;border-left:solid 2px #cccccc}body .tree li:only-child{padding-top:0em}body .tree li:only-child::after{display:none}body .tree li:only-child::before{display:none}body .tree li:first-child::before{border-style:none;border-width:0px}body .tree li:first-child::after{border-radius:5px 0px 0px 0px}body .tree li:last-child::after{border-style:none;border-width:0px}body .tree li:last-child::before{border-right:solid 2px #cccccc;border-radius:0px 5px 0px 0px}body .tree ul ul::before{content:"";position:absolute;top:0px;left:50%;border-left:solid 2px #cccccc;width:0px;height:1.19999em}body .tree li div.forest-link{border:solid 2px #cccccc;padding:0.2em 0.29999em 0.2em 0.29999em;text-decoration:none;display:inline-block;border-radius:5px 5px 5px 5px;color:#333333;position:relative;top:2px}body .tree.flipped li div.forest-link{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}</style><script
  async=""
  id="MathJax-script"
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
></script>
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css"
  rel="stylesheet"
/><link rel="preconnect" href="https://fonts.googleapis.com" /><link
  rel="preconnect"
  href="https://fonts.gstatic.com"
  crossorigin
/><link
  href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Serif:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
  rel="stylesheet"
/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
<style>
  body .ui.container,
  body ul {
    font-family: "IBM Plex Sans" !important;
  }
  body h2,
  body div.zettel-view .zettel-content h2 {
    border-bottom: none !important;
  }

  body blockquote {
    border-left-width: 3px !important;
    border-left-color: #458588 !important;
    background-color: #f2e5bc !important;
  }

  .headerFont,
  .ui.header,
  body h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: "IBM Plex Sans" !important;
  }
  body p {
    /* line-height: 1.3; */
  }

  .monoFont,
  body code,
  pre,
  tt {
    font-family: "IBM Plex Mono" !important;
    font-size: 12px !important;
    /* line-height: 1.3 !important; */
  }
  img[alt~="not-by-ai-badge"] {
    width: 100px;
  }

  #neuron-nav-bar {
    background-color: #458588;
  }

  #neuron-nav-bar a.right {
    display: none;
  }

  .ui .center img {
    display: none;
  }

  body {
    background-color: #ebdbb2 !important;
    color: #282828;
  }

  .zettel-view article.zettel-content {
    background-color: #f9f5d7 !important;
  }
  a,
  body span.zettel-link-container span.zettel-link a,
  body .deemphasized:not(:hover) a {
    color: #458588 !important;
  }

  .deemphasized:not(:hover) a {
    color: #458588 !important;
  }

  body .zettel-content h1#title-h1 {
    background-color: #458588;
    color: #f9f5d7;
  }

  .ui.raised.raised.segment,
  .ui.raised.raised.segments {
    box-shadow: none;
  }

  .ui.raised.attached.segment.zettel-content {
    border: none;
  }

  #neuron-backlinks-pane,
  #neuron-tags-pane {
    background-color: #3c3836;
    border: none;
  }

  #neuron-backlinks-pane h3.ui.header,
  #neuron-backlinks-pane p,
  #neuron-backlinks-pane > ul > li > ul > li > div {
    color: #ebdbb2 !important;
  }

  #neuron-backlinks-pane ul li::marker {
    color: #ebdbb2 !important;
  }
  #neuron-backlinks-pane > ul > li > ul > li > div > p > a,
  #neuron-backlinks-pane ul li span.zettel-link a {
    color: #83a598 !important;
  }

  body .deemphasized:not(:hover),
  body .deemphasized:hover {
    opacity: 1;
  }

  #neuron-nav-bar {
    border-radius: 0;
  }
  .ui.basic.label.zettel-tag {
    background-color: #458588;
    border-radius: 0;
    border: none;
    color: #f9f5c7;
  }

  body div.zettel-view .zettel-content p code,
  li code,
  ol code {
    padding: 0;
    font-size: 13px !important;
    background: transparent;
  }

  code[class*="language-"],
  pre[class*="language-"] {
    text-shadow: none;
  }

  .ui table {
    background-color: #f9f5d7 !important;
    border-radius: 0 !important;
    border-color: #3c3836 !important;
  }

  .ui.table > thead > tr > th {
    background-color: #3c3836 !important;
    border-radius: 0 !important;
    color: #f9f5d7 !important;
  }

  body span.zettel-link-container.errors {
    border-color: #cc241d;
  }

  body span.zettel-link-container.errors span.zettel-link a {
    color: #cc241d !important;
  }

  body span.zettel-link-container.errors span.zettel-link a:hover {
    background-color: #fb483460 !important;
  }

  /**
 * Gruvbox light theme
 *
 * Based on Gruvbox: https://github.com/morhetz/gruvbox
 * Adapted from PrismJS gruvbox-dark theme: https://github.com/schnerring/prism-themes/blob/master/themes/prism-gruvbox-dark.css
 *
 * @author Michael Schnerring (https://schnerring.net)
 * @version 1.0
 */

  code[class*="language-"],
  pre[class*="language-"] {
    color: #3c3836; /* fg1 / fg */
    font-family: Consolas, Monaco, "Andale Mono", monospace;
    direction: ltr;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  pre[class*="language-"]::-moz-selection,
  pre[class*="language-"] ::-moz-selection,
  code[class*="language-"]::-moz-selection,
  code[class*="language-"] ::-moz-selection {
    color: #282828; /* fg0 */
    background: #fbf1c7; /* bg4 */
  }

  pre[class*="language-"]::selection,
  pre[class*="language-"] ::selection,
  code[class*="language-"]::selection,
  code[class*="language-"] ::selection {
    color: #282828; /* fg0 */

    background: #fbf1c7; /* bg4 */
  }

  /* Code blocks */
  pre[class*="language-"] {
    padding: 1em;
    margin: 0.5em 0;
    overflow: auto;
  }

  :not(pre) > code[class*="language-"],
  pre[class*="language-"] {
    background: #f9f5d7; /* bg4 */
    border: 1px solid #a89984;
  }

  /* Inline code */
  :not(pre) > code[class*="language-"] {
    padding: 0.1em;
    border-radius: 0.3em;
  }

  .token.comment,
  .token.prolog,
  .token.cdata {
    color: #7c6f64; /* fg4 / gray1 */
  }

  .token.delimiter,
  .token.boolean,
  .token.keyword,
  .token.selector,
  .token.important,
  .token.atrule {
    color: #9d0006; /* red2 */
  }

  .token.operator,
  .token.punctuation,
  .token.attr-name {
    color: #7c6f64; /* fg4 / gray1 */
    background: transparent;
  }

  .token.tag,
  .token.tag .punctuation,
  .token.doctype,
  .token.builtin {
    color: #b57614; /* yellow2 */
  }

  .token.entity,
  .token.number,
  .token.symbol {
    color: #8f3f71; /* purple2 */
  }

  .token.property,
  .token.constant,
  .token.variable {
    color: #9d0006; /* red2 */
  }

  .token.string,
  .token.char {
    color: #797403; /* green2 */
  }

  .token.attr-value,
  .token.attr-value .punctuation {
    color: #7c6f64; /* fg4 / gray1 */
  }

  .token.url {
    color: #797403; /* green2 */
    text-decoration: underline;
  }

  .token.function {
    color: #b57614; /* yellow2 */
  }

  .token.regex {
    background: #797403; /* green2 */
  }

  .token.bold {
    font-weight: bold;
  }

  .token.italic {
    font-style: italic;
  }

  .token.inserted {
    background: #7c6f64; /* fg4 / gray1 */
  }

  .token.deleted {
    background: #9d0006; /* red2 */
  }
</style>
<!--replace-end-7--><!--replace-end-4--><!--replace-end-1--></head><body><div class="ui fluid container universe"><!--replace-start-2--><!--replace-start-3--><!--replace-start-6--><div class="ui text container" id="zettel-container" style="position: relative"><div class="zettel-view"><article class="ui raised attached segment zettel-content"><div class="pandoc"><h1 id="title-h1">Boot process</h1><p>The primary or boot <a href="Disks.md#primary-extended-and-logical-partitions">partition</a> of a harddisk contains a bootloader. It is the job of the bootloader to locate the <span class="zettel-link-container cf"><span class="zettel-link" title="Zettel: The kernel"><a href="The_kernel">kernel</a></span></span> on the harddrive and inject it into memory so that they operating system can start. This is the boot process.</p><h2 id="boot-loaders">Boot loaders</h2><p>The boot loader loads the kernel into memory from the disk and then starts the kernel with a set of kernel parameters.</p><p>Like the kernel itself, the boot loader requires a driver in order to access the disk but it can’t use the same one as the kernel since at this point, the kernel is not yet loaded into memory. So it has its own special driver: this is either the BIOS or the UEFI firmware.</p><p>A boot loader’s core functionality includes the ability to do the following:</p><ul><li>select from multiple kernels</li><li>switch between sets of kernel parameters</li><li>provide support for booting other operating systems</li></ul><h3 id="bios-and-uefi">BIOS and UEFI</h3><p>BIOS and UEFI are both firmware that is installed directly on the motherboard of the computer. They are firmware because they are software that is permanent and programmed into read-only memory.</p><p>In the context of disks, their most crucial role is locating the operating system on the harddisk and loading it into memory so that the bootstrapping process can begin. However they are also responsible for the computer clock and the management of peripherals.</p><p>As we can see from the <code>fdisk</code> readout, the boot partition uses EFI, the storage partition associated with UEFI.</p><pre><code class="bash language-bash">Device            Start        End   Sectors   Size Type
/dev/nvme0n1p1     2048    1001471    999424   488M EFI System
/dev/nvme0n1p2  1001472   59594751  58593280  27.9G Linux filesystem
/dev/nvme0n1p3 59594752 1000214527 940619776 448.5G Linux filesystem</code></pre><p>Whilst UEFI is installed on the hardware, most of its configuration is stored in the EFI partition on the disk, whereas with BIOS, everything is on the chip. This makes booting faster with UEFI.</p><p>Even though most modern computers use UEFI, it may still be referred to as BIOS for user-continuity (for instance on WIndows). With Linux you have to explicitly create your boot process so the two are clearly distinguishable.</p><h3 id="grub">GRUB</h3><p>The de facto standard boot loader for Linux is GRUB: Grand Unified Boot Loader.</p><p><img src="static/grub.jpg" /></p><p>You see the GRUB default menu when you first start a Linux machine. It will offer you various options for loading your installed OS or other OSs. GRUB is a <a href="./Filesystems.md">filesystem</a> like the main disk. If you press <code>e</code> in this screen you can view and edit specific boot parameters. Pressing <code>c</code> gives you access to the GRUB command line interface. This allows you to interact with GRUB in the same way as you would with any other filesystem, allowing for advanced configuration.</p><h2 id="the-boot-sequence">The boot sequence</h2><ol><li>The machine’s BIOS or boot firmware (in the case of UEFI) loads and runs a boot loader. It finds the bootloader by looking for the part of the disk that contains either the MBR or GPT sector.</li><li>The boot loader finds the kernel image on disk, loads it into memory and starts it.</li><li>The kernel initializes the devices and its drivers.</li><li>The kernel mounts the root filesystem.</li><li>The kernel starts a program called <strong>init</strong>. It has a <a href="Processes.md#processes-ps">process id</a> of 1. This is the point at which <span class="zettel-link-container cf"><span class="zettel-link" title="Zettel: User space"><a href="User_Space">user space</a></span></span> starts.</li><li>Init sets the rest of the system processes in motion.</li><li>At the end of the boot process, init starts a process allowing you to log in.</li></ol><h2 id="boot-diagnostics">Boot diagnostics</h2><p>Linux keeps a log of the boot process as part of the <a href="./journald.md">journal</a> log of everything that happens on disk. We can use the command <code>journalct -k</code> to view the diagnostics generated during the boot. Here is a selection:</p><pre><code class="language-none">Jul 07 07:12:58 archbish kernel: Linux version 5.18.5-arch1-1 (linux@archlinux) (gcc (GCC) 12.1.0, GNU ld (GNU Binutils) 2.38) #1 SMP PREEMPT_DYNAMIC Thu, 16 Jun 2022 20:40:45 +0000
Jul 07 07:12:58 archbish kernel: Command line: BOOT_IMAGE=/boot/vmlinuz-linux root=UUID=2ee6b834-0857-49dc-b8ba-a24d46d228ae rw loglevel=3 quiet
Jul 07 07:12:58 archbish kernel: x86/fpu: Supporting XSAVE feature 0x002: &#39;SSE registers&#39;
Jul 07 07:12:58 archbish kernel: x86/fpu: Supporting XSAVE feature 0x004: &#39;AVX registers&#39;
Jul 07 07:12:58 archbish kernel: x86/fpu: Supporting XSAVE feature 0x020: &#39;AVX-512 opmask&#39;
Jul 07 07:12:58 archbish kernel: x86/fpu: Supporting XSAVE feature 0x040: &#39;AVX-512 Hi256&#39;
Jul 07 07:12:58 archbish kernel: x86/fpu: xstate_offset[2]:  576, xstate_sizes[2]:  256
Jul 07 07:12:58 archbish kernel: x86/fpu: xstate_offset[5]:  832, xstate_sizes[5]:   64
Jul 07 07:12:58 archbish kernel: x86/fpu: xstate_offset[6]:  896, xstate_sizes[6]:  512
Jul 07 07:12:58 archbish kernel: x86/fpu: xstate_offset[7]: 1408, xstate_sizes[7]: 1024
Jul 07 07:12:58 archbish kernel: x86/fpu: xstate_offset[9]: 2432, xstate_sizes[9]:    8
Jul 07 07:12:58 archbish kernel: x86/fpu: Enabled xstate features 0x2e7, context size is 2440 bytes, using &#39;compacted&#39; format.
Jul 07 07:12:58 archbish kernel: signal: max sigframe size: 3632
Jul 07 07:12:58 archbish kernel: BIOS-provided physical RAM map:
Jul 07 07:12:58 archbish kernel: BIOS-e820: [mem 0x0000000000000000-0x000000000009efff] usable
Jul 07 07:12:58 archbish kernel: BIOS-e820: [mem 0x000000000009f000-0x00000000000fffff] reserved
Jul 07 07:12:58 archbish kernel: BIOS-e820: [mem 0x0000000000100000-0x000000008ef6efff] usable
Jul 07 07:12:58 archbish kernel: BIOS-e820: [mem 0x000000008ef6f000-0x000000008f03efff] type 20
Jul 07 07:12:58 archbish kernel: BIOS-e820: [mem 0x000000008f03f000-0x0000000093f2efff] reserved
Jul 07 07:12:58 archbish kernel: BIOS-e820: [mem 0x0000000093f2f000-0x0000000094b2efff] ACPI NVS
Jul 07 07:12:58 archbish kernel: BIOS-e820: [mem 0x0000000094b2f000-0x0000000094bfefff] ACPI data
Jul 07 07:12:58 archbish kernel: BIOS-e820: [mem 0x0000000094bff000-0x0000000094bfffff] usable
Jul 07 07:12:58 archbish kernel: NX (Execute Disable) protection: active
Jul 07 07:12:58 archbish kernel: efi: EFI v2.70 by Lenovo
Jul 07 07:12:58 archbish kernel: efi: ACPI=0x94bfe000 ACPI 2.0=0x94bfe014 SMBIOS=0x90cbd000 SMBIOS 3.0=0x90cb0000 TPMFinalLog=0x9498f000 MEMATTR=0x8aa30018 ESRT=0x8ab9c000
Jul 07 07:12:58 archbish kernel: SMBIOS 3.2.0 present.
Jul 07 07:12:58 archbish kernel: DMI: LENOVO 20W4000NUK/20W4000NUK, BIOS N34ET40W (1.40 ) 06/25/2021
Jul 07 07:12:58 archbish kernel: tsc: Detected 2400.000 MHz processor
Jul 07 07:12:58 archbish kernel: tsc: Detected 2419.200 MHz TSC
Jul 07 07:12:58 archbish kernel: e820: update [mem 0x00000000-0x00000fff] usable ==&gt; reserved
Jul 07 07:12:58 archbish kernel: e820: remove [mem 0x000a0000-0x000fffff] usable
Jul 07 07:12:58 archbish kernel: last_pfn = 0x45f800 max_arch_pfn = 0x400000000
Jul 07 07:12:58 archbish kernel: x86/PAT: Configuration [0-7]: WB  WC  UC- UC  WB  WP  UC- WT
Jul 07 07:12:58 archbish kernel: last_pfn = 0x94c00 max_arch_pfn = 0x400000000
Jul 07 07:12:58 archbish kernel: esrt: Reserving ESRT space from 0x000000008ab9c000 to 0x000000008ab9c150.
Jul 07 07:12:58 archbish kernel: e820: update [mem 0x8ab9c000-0x8ab9cfff] usable ==&gt; reserved</code></pre><p>We can see that the first thing that is registered is the OS image that contains the kernel. From this point on, the kernel is active and doing its work.</p><h2 id="initial-kernel-actions">Initial kernel actions</h2><p>The diagnostics above are a running commentary provided by the kernel itself about its actions. The details will be specific to the machine in question but the general sequence is as follows for all operating systems:</p><ol><li>CPU inspection</li><li>Memory inspection</li><li>Device bus discovery</li><li>Device discovery</li><li>Auxiliary kernel subsystem setup (networks etc)</li><li>Mounting of the root filesystem</li><li>Starting of user space</li></ol></div></article><nav class="ui attached segment deemphasized backlinksPane" id="neuron-backlinks-pane"><h3 class="ui header">Backlinks</h3><ul class="backlinks"><li><span class="zettel-link-container cf"><span class="zettel-link"><a href="systemd">systemd</a></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc"><p>Once the <span class="zettel-link-container cf"><span class="zettel-link" title="Zettel: Boot process"><a href="Boot_process">boot process</a></span></span> has completed and the bootloader has located the kernel and injected it into memory the first user space program runs: <code>init</code> (for <em>initialisation</em>). <code>init</code> is a <span class="zettel-link-container cf"><span class="zettel-link" title="Zettel: Daemons"><a href="Daemons">daemon</a></span></span> <a href="./Processes.md">process</a> that continues running until shutdown and is responsible for starting all the processes that are prerequisites for user space. For example: network connections, disk access, user logins etc. <code>init</code> is the parent of all processes: PID1. Whilst it does a lot of its work in quick succession at boot time it is not limited to the this stage of the lifescycle but runs continuously in reponse to new user events.</p></div></li></ul></li><li><span class="zettel-link-container cf"><span class="zettel-link"><a href="VirtualMemory">Virtual memory</a></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc"><p>During the <span class="zettel-link-container cf"><span class="zettel-link" title="Zettel: Boot process"><a href="Boot_process">boot_process</a></span></span>, it runs in physical memory mode however it rapidly creates a 1:1 mapping of physical to virtual memory for itself. This direct mapping allows the kernel to easily access any physical memory location as needed, whilst retaining the benefits of virtual memory.</p></div></li></ul></li><li><span class="zettel-link-container cf"><span class="zettel-link"><a href="Role_of_memory_in_computation">The role of memory in computation</a></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc"><p>The following steps outline the way in which memory interacts with the processor during computational cycles, once the <span class="zettel-link-container cf"><span class="zettel-link" title="Zettel: Boot process"><a href="Boot_process">bootstrapping</a></span></span> process has completed and the OS kernel is itself loaded into memory.</p></div></li></ul></li></ul></nav><nav class="ui attached segment deemphasized bottomPane" id="neuron-tags-pane"><div><span class="ui basic label zettel-tag" title="Tag">disks</span><span class="ui basic label zettel-tag" title="Tag">operating-systems</span></div></nav><nav class="ui bottom attached icon compact inverted menu blue" id="neuron-nav-bar"><!--replace-start-9--><!--replace-end-9--><a class="right item" href="impulse" title="Open Impulse"><i class="wave square icon"></i></a></nav></div></div><!--replace-end-6--><!--replace-end-3--><!--replace-end-2--><div class="ui center aligned container footer-version"><div class="ui tiny image"><a href="https://neuron.zettel.page"><img alt="logo" src="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" title="Generated by Neuron 1.9.35.3" /></a></div></div></div></body></html>